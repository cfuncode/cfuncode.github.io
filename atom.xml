<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-05-24T16:25:41.814Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://example.com/2022/05/24/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <id>http://example.com/2022/05/24/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</id>
    <published>2022-05-24T15:48:00.717Z</published>
    <updated>2022-05-24T16:25:41.814Z</updated>
    
    <content type="html"><![CDATA[<h1 id="frp内网穿透工具"><a href="#frp内网穿透工具" class="headerlink" title="frp内网穿透工具"></a>frp内网穿透工具</h1><p><img src="http://img.funcode.work/images/2022/05/14/77d5eacbfe06a6d2aee42c9ee1fe5775.png"></p><blockquote><p>frp的github地址：<a href="https://github.com/fatedier/frp">https://github.com/fatedier/frp</a><br>官方文档：<a href="https://gofrp.org/">https://gofrp.org/</a></p></blockquote><h1 id="本地主机连接其他局域网电脑"><a href="#本地主机连接其他局域网电脑" class="headerlink" title="本地主机连接其他局域网电脑"></a>本地主机连接其他局域网电脑</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><ol><li>一台自己使用的电脑</li><li>一台不同局域网的电脑</li><li>一台具有公网IP的服务器</li></ol><h2 id="安装frp内网穿透工具"><a href="#安装frp内网穿透工具" class="headerlink" title="安装frp内网穿透工具"></a>安装frp内网穿透工具</h2><h3 id="下载frp安装包"><a href="#下载frp安装包" class="headerlink" title="下载frp安装包"></a>下载frp安装包</h3><p><img src="http://img.funcode.work/images/2022/05/14/f99aeed746ebe0c9f544410e04a90c09.png"></p><p>linux版：</p><ol><li>github下载地址：<a href="https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_amd64.tar.gz">https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_amd64.tar.gz</a></li><li>镜像下载地址：<a href="https://pd.zwc365.com/seturl/https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_amd64.tar.gz">https://pd.zwc365.com/seturl/https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_amd64.tar.gz</a></li></ol><p>windows版：</p><ol><li>github下载地址：<a href="https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_windows_amd64.zip">https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_windows_amd64.zip</a></li><li>镜像下载地址：<a href="https://pd.zwc365.com/seturl/https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_windows_amd64.zip">https://pd.zwc365.com/seturl/https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_windows_amd64.zip</a></li></ol><h3 id="服务器安装frp"><a href="#服务器安装frp" class="headerlink" title="服务器安装frp"></a>服务器安装frp</h3><h4 id="配置服务器安全组"><a href="#配置服务器安全组" class="headerlink" title="配置服务器安全组"></a>配置服务器安全组</h4><p><strong>具体配置方法看不同厂家的文档说明，这里我用的是阿里云的服务器</strong><br><a href="https://help.aliyun.com/document_detail/25475.html">安全组应用案例</a><br><img src="http://img.funcode.work/images/2022/05/14/bc7253bd6f67bfa3ba5b0e856636a53f.png"></p><ol><li>我配置了7000~7500的端口范围，用于为frp服务器暴露端口用。</li><li>设置了全部的ip都可以访问这个服务器的端口范围。</li></ol><h4 id="centos7系统"><a href="#centos7系统" class="headerlink" title="centos7系统"></a>centos7系统</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/system-release # 查看系统版本</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/14/bcc67bca02d5692fd7d512c60cb0ef91.png"></p><h4 id="下载安装frp"><a href="#下载安装frp" class="headerlink" title="下载安装frp"></a>下载安装frp</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://pd.zwc365.com/seturl/https://github.com/fatedier/frp/releases/download/v0.37.0/frp_0.37.0_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/25/cd82cc6e5cd5559961e5ad8af75993c6.png"></p><h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zvxf frp_0.37.0_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/14/3fcf5d411d55437a16c643376c931947.png"></p><h4 id="设置防火墙"><a href="#设置防火墙" class="headerlink" title="设置防火墙"></a>设置防火墙</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld # 查看防火墙状态</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/25/fd852c67aee92c416ea4e28b5968b9b7.png"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --list-ports # 查看所有放行的端口</span><br><span class="line">firewall-cmd --zone=public --add-port=7000/tcp --permanent # 永久开放7000端口</span><br><span class="line">firewall-cmd --reload # 重新加载配置</span><br><span class="line">firewall-cmd --zone=public --list-ports # 查看所有放行的端口</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/14/3a767359e855cc5b7dd348273b039ed9.png"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --remove-port=7000/tcp --permanent # 永久删除7000端口</span><br><span class="line">firewall-cmd --zone=public --list-ports # 查看所有放行的端口</span><br><span class="line">firewall-cmd --reload # 重新加载配置</span><br><span class="line">firewall-cmd --zone=public --list-ports # 查看所有放行的端口</span><br><span class="line">firewall-cmd --zone=public --add-port=7000-7500/tcp --permanent # 永久开放7000-7500端口</span><br><span class="line">firewall-cmd --reload # 重新加载配置</span><br><span class="line">firewall-cmd --zone=public --list-ports # 查看所有放行的端口</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/25/112a88ac17fac1653e720cd2ac8a13a2.png"></p><p><strong>更多防火墙设置请参考：<a href="https://www.cnblogs.com/ningyouyou/p/14759817.html">https://www.cnblogs.com/ningyouyou/p/14759817.html</a></strong></p><h4 id="配置frps-ini文件"><a href="#配置frps-ini文件" class="headerlink" title="配置frps.ini文件"></a>配置frps.ini文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">frp服务端监听的端口</span></span><br><span class="line">bind_port = 7000</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">服务端的token（可随意设置）</span></span><br><span class="line">token = MY_TOKEN</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过浏览器查看frp的状态以及代理统计信息展示（可选）</span></span><br><span class="line">dashboard_port = 7500</span><br><span class="line">dashboard_user = admin</span><br><span class="line">dashboard_pwd = password</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/25/b38c4506b1d295887add38e3d1d5a7e0.png"></p><p><strong>更多服务端配置请参考：<a href="https://gofrp.org/docs/reference/server-configures/">https://gofrp.org/docs/reference/server-configures/</a></strong></p><h4 id="启动服务端frp"><a href="#启动服务端frp" class="headerlink" title="启动服务端frp"></a>启动服务端frp</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup ./frps -c frps.ini &gt; frps.log 2&gt;&amp;1 &amp; # 后台启动frp服务，并输出日志到当前路径的frps.log文件中</span><br><span class="line">tail -n 20 frps.log # 查看该文件后20行信息</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/14/6cbc99e14c95c82df2b099c838ed8f9a.png"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep frp # 查看frp服务进程是否启动成功</span><br><span class="line">netstat -lnp|grep 7000 # 查看端口是否正在监听（使用）</span><br><span class="line">netstat -lnp|grep 7500 # 查看端口是否正在监听（使用）</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/14/840aa15ee50333307c54ee7bfb02eae7.png"></p><h4 id="访问仪表盘"><a href="#访问仪表盘" class="headerlink" title="访问仪表盘"></a>访问仪表盘</h4><p><img src="http://img.funcode.work/images/2022/05/14/1f96d42225f83016d5c3a4ceac91743a.png"></p><blockquote><p>输入用户名和密码</p></blockquote><p><img src="http://img.funcode.work/images/2022/05/14/37e3799a9726dc5c79fa2e458862574f.png"></p><p>看到这个页面证明frp服务器配置成功了！</p><h3 id="客户端安装frp"><a href="#客户端安装frp" class="headerlink" title="客户端安装frp"></a>客户端安装frp</h3><h4 id="同理下载解压windows版frp工具"><a href="#同理下载解压windows版frp工具" class="headerlink" title="同理下载解压windows版frp工具"></a>同理下载解压windows版frp工具</h4><p><img src="http://img.funcode.work/images/2022/05/14/405fec281e8e78c23d5b370b4f9dcff5.png"></p><h4 id="配置frpc-ini文件"><a href="#配置frpc-ini文件" class="headerlink" title="配置frpc.ini文件"></a>配置frpc.ini文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">自己的服务器公网IP</span></span><br><span class="line">server_addr = x.x.x.x</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">frp服务器监听的端口</span></span><br><span class="line">server_port = 7000</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置token，防止其他人随意连接服务器，从而占用带宽！(客户端token设置与服务端token要一致)</span></span><br><span class="line">token = MY_TOKEN</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">反向代理名称（可随意设置）</span></span><br><span class="line">[RDP]</span><br><span class="line">type = tcp</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本机 IP</span></span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">远程桌面的默认端口</span></span><br><span class="line">local_port = 3389</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">外网访问的端口（可选值7001~7499，根据之前的配置而定）</span></span><br><span class="line">remote_port = 7001</span><br><span class="line"></span><br><span class="line">[ORACLE]</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 1521</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">外网访问的端口（可选值7001~7499，根据之前的配置而定）</span></span><br><span class="line">remote_port = 7002</span><br><span class="line"></span><br><span class="line">[MYSQL]</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 3306</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">外网访问的端口（可选值7001~7499，根据之前的配置而定）</span></span><br><span class="line">remote_port = 7003</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">... 等等，想代理哪个端口就配置哪个！</span></span><br></pre></td></tr></table></figure><p><strong>更多客户端配置请参考：<a href="https://gofrp.org/docs/reference/client-configures/">https://gofrp.org/docs/reference/client-configures/</a></strong></p><h4 id="编写restart-frp-vbs文件"><a href="#编写restart-frp-vbs文件" class="headerlink" title="编写restart_frp.vbs文件"></a>编写restart_frp.vbs文件</h4><p>新建txt文件，改名为restart_frp.vbs，粘贴下面代码保存（路径需要根据实际情况配置）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Set ws = CreateObject(&quot;Wscript.Shell&quot;)</span><br><span class="line">ws.currentdirectory = &quot;D:\frp_0.37.0_windows_amd64&quot;</span><br><span class="line">ws.run &quot;cmd /c frpc -c frpc.ini &gt;&gt; frpc.log&quot;,vbhide</span><br></pre></td></tr></table></figure><p><img src="http://img.funcode.work/images/2022/05/14/5ce8d54f62a313a99c7b5291199b20b3.png"></p><p>然后双击该文件运行！会在配置的路径生成frpc.log日志文件！</p><p><strong>查看frpc.log日志文件</strong></p><p><img src="http://img.funcode.work/images/2022/05/14/243e254c40c05c77dab781d7fc0989f3.png"></p><p><strong>查看服务端frps.log日志文件</strong></p><p><img src="http://img.funcode.work/images/2022/05/25/55a1ad3417201ee20a4dd1087743d691.png"></p><h3 id="本地主机通过安装了frp的服务器连接其他局域网电脑"><a href="#本地主机通过安装了frp的服务器连接其他局域网电脑" class="headerlink" title="本地主机通过安装了frp的服务器连接其他局域网电脑"></a>本地主机通过安装了frp的服务器连接其他局域网电脑</h3><p><img src="http://img.funcode.work/images/2022/05/25/b59853c8ba265adacb246a396f30b4dc.png"></p><p><strong>成功通过本地主机连接代理的局域网电脑的oracle数据库！！！</strong></p><h3 id="最后设置客户端开机自动启动frp内网穿透服务"><a href="#最后设置客户端开机自动启动frp内网穿透服务" class="headerlink" title="最后设置客户端开机自动启动frp内网穿透服务"></a>最后设置客户端开机自动启动frp内网穿透服务</h3><p><img src="http://img.funcode.work/images/2022/05/25/f081b8776c1b1b391942761a35a61208.png"><br>C:\Users\XXX\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup<br><strong>将<code>restart_frp.vbs</code>文件复制到该路径即可开机自动启动了！</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;frp内网穿透工具&quot;&gt;&lt;a href=&quot;#frp内网穿透工具&quot; class=&quot;headerlink&quot; title=&quot;frp内网穿透工具&quot;&gt;&lt;/a&gt;frp内网穿透工具&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;http://img.funcode.work/images/2</summary>
      
    
    
    
    
  </entry>
  
</feed>
